def.ns="/gn/Corp/";def.ContentState("Edit","id").Controller(["pb","serverVm","$scope",function(c,e,b){c.Super(this,e,b,!1).ExecuteTrueResult=function(b){c.AjaxNavBack()}}]);def.ContentState("Add").WithController("Edit");def.ContentState("Search").WithChild("List");def.ns="/gn/Dept/";
def.ContentState("Edit","id").Controller(["pb","serverVm","$scope","App_FuncTree",function(c,e,b,h){var d=c.Super(this,e,b,!1);d.ExecuteNoopResult=function(a){c.AjaxNavBack()};d.btnSave_click=function(){var a=h.GetUncheckedListString(d.tmp_treeModel);c.AjaxSubmit("btnSave",null,{"ajax-data":"input.deptFuncIds="+a})}}]);def.ContentState("Add").WithController("Edit");
def.ContentState("List").NavBackRefresh().Controller(["pb","serverVm","$scope","$window","$uibPosition","pbui",function(c,e,b,h,d,a){var f=c.Super(this,e,b,!1);f.vm.editInput={id:0};f.tmp.IsInLine=!1;f.btnDeleteInLine_click=function(b){var d=f.vm.resultList[b];a.Confirm("ConfirmDelete",d.name).then(function(){c.CallAction("/do/gn/Dept/DeleteInLine?id="+d.id,null,function(a){!0==a.data&&delete f.vm.resultList[b]})})};f.btnAddInLine_click=function(){f.moveToLine(-1)};f.btnEditInLine_click=function(a,
b){f.moveToLine(b);f.vm.editInput=a;f.tmp.backupItem=angular.copy(a)};f.btnSaveInLine_click=function(){c.AjaxSubmit("c.frmEdit",null,null,function(a){a.IsData&&(0==f.vm.editInput.id&&(f.vm.editInput.id=a.data,f.vm.resultList[f.vm.resultList.length]=f.vm.editInput),f.resetEditLine())})};f.btnCancel_click=function(){angular.copy(f.tmp.backupItem,f.vm.editInput);f.resetEditLine()};f.resetEditLine=function(){f.vm.editInput={id:0};f.frmEdit.$setPristine();f.moveToLine(null)};f.moveToLine=function(a){var b=
c.ElementById("tbl"),d=c.ElementById("divEdit"),e=c.ElementById("divNewRow");f.tmp.IsInLine=!0;null==a?(f.tmp.IsInLine=!1,c.ElementById("divStandBy").append(d)):-1==a?e.after(d):b.children().eq(a+1).after(d)}}]).WithChild("SrcCode.htm");def.ns="/gn/User/";
def.ContentState("Edit","id").Controller(["pb","serverVm","$scope","App_FuncTree",function(c,e,b,h){var d=c.Super(this,e,b,!1);d.ExecuteNoopResult=function(a){c.AjaxNavBack()};d.btnSave_click=function(){var a=h.GetUncheckedListString(d.tmp_treeModel);c.AjaxSubmit("btnSave",null,{"ajax-data":"input.userFuncIds="+a})}}]);def.ContentState("Add","deptId").WithController("Edit");
def.ContentState("Search").Controller(["pb","serverVm","$scope",function(c,e,b){c.Super(this,e,b,!0).dept_change=function(){c.AjaxSubmit("frmSearch")}}]).WithChild("List").NavBackRefresh(["pb",function(c){c.AjaxSubmit("frmSearch")}]);
def.ContentState("PassEdit.htm").Controller(["pb","$scope",function(c,e){var b=c.Super(this,{},e,!1);b.btnOK_click=function(){b.frmPass.$invalid||c.AjaxSubmit(null,null,{"ajax-url":"/do/gn/User/SavePassword","ajax-data":"OldPassword="+hex_md5(b.vm.OldPassword)+"&NewPassword="+hex_md5(b.vm.NewPassword)})}}]);def.ns="";def.RootState("/home/Home/MainFrameLoggedIn.htm").NoResolve().NoController();
def.RootState("/home/Home/ShowLogin").Controller(["pb","serverVm","serverResult","$translate",function(c,e,b,h){var d=this;c.ExecuteResult(b,d);d.password_keydown=function(a){return 13==a.which?(d.btnLogin_click(),!1):!0};d.btnLogin_click=function(){d.frmLogin.$invalid||c.CallAction("/do/home/Home/Login","corpCode="+d.vm.corpCode+"&code="+d.vm.code+"&password="+hex_md5(d.vm.password))};d.setLang=function(a){h.use(a)}}]).ForceRefreshTemplate();
app.controller("LeftViewCtrl",["pb","$scope",function(c,e){var b=this;e.$on("$stateChangeSuccess",function(c,d,a,f,k){b.showView="/home/Home/ShowLogin"!=d.name;e.$parent.baseCtrl.showLeftView=b.showView})}]);
app.controller("TopViewCtrl",["pb","$scope","$state",function(c,e,b){var h=this;h.showView=!0;h.navbarCollapsed=!0;h.vm={input:{}};e.$on("$stateChangeSuccess",function(d,a,f,k,g){h.showView="/home/Home/ShowLogin"!=a.name;!h.showView||void 0!=e.baseCtrl.vm&&void 0!=e.baseCtrl.vm.loginCorpName||c.CallAction("/do/home/Home/MainFrame",null,function(a){e.baseCtrl.vm=a.data.ViewModel;null==a.data.ViewModel?b.go("/home/Home/ShowLogin"):e.baseCtrl.InitMenu(a.data.ViewModel.forbiddenMenuFuncList)})});h.Html_Load=
function(){};h.btnLogin_click=function(){h.frmTopLogin.$invalid||c.CallAction("/do/home/Home/Login","corpCode=1&code="+h.vm.input.code+"&password="+hex_md5(h.vm.input.password))};h.btnLogout_click=function(){e.baseCtrl.vm={};c.CallAction("/do/home/Home/Logout")}}]);def.ns="/ta/Task/";def.ContentState("Edit","id").Controller(["pb","serverVm","$scope",function(c,e,b){c.Super(this,e,b,!1).ExecuteNoopResult=function(b){c.AjaxNavBack()}}]);def.ContentState("Add").WithController("Edit");def.ContentState("Search").WithChild("List").WithChild("SrcCode.htm").NoResolve();
def.ns="/ta/TaskItem/";def.ContentState("Edit","id").Controller(["pb","serverVm","$scope",function(c,e,b){c.Super(this,e,b,!1).ExecuteNoopResult=function(b){c.AjaxNavBack()}}]);def.ContentState("Add").WithController("Edit");def.ContentState("Search").WithChild("List").WithChild("SrcCode.htm").NoResolve();
(function(c,e){e.module("projectbase").directive("ajaxNavbar",["pb","$state","$stateParams",function(b,c,d){return{priority:0,templateUrl:"/Shared/Directive/AjaxNavbar.htm",restrict:"EA",scope:!0,controllerAs:"d",controller:["$scope","$element","$attrs","$transclude",function(a,d,e,g){this.AjaxNavStack=b.AjaxNavData.Stack;this.AjaxNavRefresh=function(){c.go(b.AjaxNavData.Stack[b.AjaxNavData.Stack.length-1].State,b.AjaxNavData.Stack[b.AjaxNavData.Stack.length-1].StateParams,{inherit:!1,reload:!0})};
this.AjaxNavBack=function(){b.AjaxNavBack()};this.AjaxNavTo=function(a,d){for(;0<b.AjaxNavData.Stack.length&&a!=b.AjaxNavData.Stack[b.AjaxNavData.Stack.length-1].State;)b.AjaxNavData.Stack.pop();c.go(a,d,{inherit:!1,reload:!0})}}]}}])})(String,angular);
(function(c,e){e.module("projectbase").directive("pbFunctree",["pb","$state","$stateParams",function(b,c,d){return{priority:0,templateUrl:"/do/shared/Common/FuncList?action",restrict:"EA",scope:{inputModel:"=inputModel",treeModel:"=treeModel",disabled:"=disabled"},controllerAs:"d",controller:["$scope","$element","$attrs","$transclude",function(a,b,d,c){this.chk_change=function(b){for(var d=0,c=0;c<a.d.levelList.length;c++)if(a.d.levelList[c]==b){d=c;break}for(c=d+1;c<a.d.levelList.length&&!(a.d.levelList[c].length<=
b.length);c++)a.d.selectedList[c]=a.d.selectedList[d]}}],link:function(a,c,b,d){c=function(b,c){var d=b.split(",");e.forEach(d,function(b){e.forEach(a.d.funcList,function(d,e){d==b&&(a.d.selectedList[e]=!1,a.d.disableList[e]=!c)})})};a.d.funcList=a.d._initData.funcList;a.d.levelList=a.d._initData.levelList;a.d.selectedList=[];for(b=0;b<a.d.funcList.length;b++)a.d.selectedList[b]=!0;a.d.disableList=[];a.treeModel={funcList:a.d.funcList,selectedList:a.d.selectedList,disableList:a.d.disableList};b=e.isUndefined(a.inputModel.userFuncIds);
d=e.isUndefined(a.inputModel.deptFuncIds);c(a.inputModel.corpFuncIds,d);a.inputModel.deptFuncIds&&c(a.inputModel.deptFuncIds,b);a.inputModel.userFuncIds&&c(a.inputModel.userFuncIds,!0)}}}])})(String,angular);
(function(c,e){e.module("projectbase").directive("pagerInput",["pb","$timeout",function(b,c){return{priority:0,templateUrl:"/Shared/Directive/Pager.htm",restrict:"A",scope:{m:"=pagerModel"},controllerAs:"d",controller:["$scope","$element","$attrs","$transclude",function(d,a,e,k){var g=this;k=d.m;g.inputName_PageNum=e.pagerInput+".pageNum";g.inputName_PageSize=e.pagerInput+".pageSize";g.submitData=function(){return{"ajax-data":g.inputName_PageNum+"="+d.m.pageNum+"&"+g.inputName_PageSize+"="+d.m.pageSize}};
g.pagerShort=e.pagerShort;g.pagesizeItems=[5,15,100];null!=e.pagerSizemax&&(g.pagesizeItems[3]=e.pagerSizemax);if(null==k.pageNum||1>k.pageNum)k.pageNum=1;k.pageNum>k.pageCount&&(k.pageNum=k.pageCount);0<=k.pageCount&&0>=k.pageNum&&(k.pageNum=1);g.goPageNum=k.pageNum;g.firstpage_click=function(){1!=d.m.pageNum&&(g.goPageNum=d.m.pageNum=1,b.AjaxSubmit(a,null,g.submitData()));return!1};g.prevpage_click=function(){1<d.m.pageNum&&(g.goPageNum=d.m.pageNum-=1,b.AjaxSubmit(a,null,g.submitData()));return!1};
g.nextpage_click=function(){d.m.pageNum<d.m.pageCount&&(g.goPageNum=d.m.pageNum+=1,b.AjaxSubmit(a,null,g.submitData()));return!1};g.lastpage_click=function(){d.m.pageNum!=d.m.pageCount&&(g.goPageNum=d.m.pageNum=d.m.pageCount,b.AjaxSubmit(a,null,g.submitData()));return!1};g.go_click=function(){null!=g.goPageNum&&(d.m.pageNum=g.goPageNum,b.AjaxSubmit(a,null,g.submitData(),function(a){g.goPageNum=a.data.ViewModel.input.pager.pageNum}))};g.pagesize_change=function(){b.AjaxSubmit(a,null,g.submitData(),
function(){c(function(){g.goPageNum=d.m.pageNum})})}}]}}])})(String,angular);
