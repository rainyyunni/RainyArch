var app=angular.module("app",["projectbase"]),def=new PB_Global_StateDefiner(app);def.SetDefaultLayout("/Shared/ContentLayout");def.SetAjaxNavRootState("/home/Home/MainFrameLoggedIn");def.SetUrlMappingPrefix("/do");def.LayoutState("/Shared/ContentLayout.htm");def.LayoutState("/Shared/ErrorLayout.htm");app.constant("App_DefaultState","/home/Home/ShowLogin");app.constant("App_UniqueCheckerUri","/do/shared/Common/CheckUnique?name=");
app.constant("App_MenuData",[{text:"Sample",funcCode:"M_Sample",stateRef:"",subMenus:[{text:"Task",funcCode:"M_Task",stateName:"/ta/Task/SrcCode"},{text:"TaskItem",funcCode:"M_TaskItem",stateName:"/ta/TaskItem/SrcCode"}]},{text:"System",funcCode:"M_System",subMenus:[{text:"Corp",funcCode:"M_Corp",stateName:"/gn/Corp/MultiViewsSample"},{text:"Dept",funcCode:"M_Dept",stateName:"/gn/Dept/SrcCode"},{text:"User",funcCode:"M_User",stateName:"/gn/User/List"}]},{text:"Personal",funcCode:"M_Personal",subMenus:[{text:"ChangePass",
funcCode:"M_Pass",stateName:"/gn/User/PassEdit"}]}]);
app.config(["$stateProvider","$urlRouterProvider","$httpProvider","$translateProvider","pbProvider","App_DefaultState",function(a,b,d,c,f,g){d.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";d.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";c.useSanitizeValueStrategy("escape");c.useLocalStorage();c.preferredLanguage(window.localStorage.lang||"zh-cn");c.useStaticFilesLoader({prefix:"/Scripts/lang/",suffix:".json"});b.otherwise(g);def.RegisterStates(a)}]);
app.run(["validator","myCustomErrorMessageResolver","myCustomElementModifier","defaultErrorMessageResolver","$rootScope","$state","$stateParams",function(a,b,d,c,f,g,e){a.registerDomModifier(d.key,d);a.setDefaultElementModifier(d.key);a.defaultFormValidationOptions.forceValidation=!0;c.setI18nFileRootPath("/Scripts/lang");c.setCulture("zh-cn");a.setErrorMessageResolver(b.resolve);f.$state=g;f.$stateParams=e}]);
app.factory("myCustomErrorMessageResolver",["$q","defaultErrorMessageResolver","$translate","$window","$log",function(a,b,d,c,f){return{resolve:function(a,e){var l=b.resolve(a,e),k;if(e.attr("valmsg"))try{k=angular.fromJson(e.attr("valmsg"))[a]}catch(m){f.error("valmsg's value is invalid, should be a json string:"+e.attr("valmsg"))}var h=e.attr("translatekey");return l.then(function(a){var b=k||a;d([h,b]).then(function(a){c.alert(a[h]+" "+a[b])},function(a){c.alert(a[h]+" "+a[b])})})}}}]);
app.factory("myCustomElementModifier",[function(){return{makeValid:function(a){a.css("border-color","green")},makeInvalid:function(a,b){a.css("border-color","red")},key:"myCustomModifierKey"}}]);app.factory("App_FuncTree",function(){return{GetUncheckedListString:function(a){var b=[];angular.forEach(a.funcList,function(d,c){!1!=a.selectedList[c]||!angular.isUndefined(a.disableList[c])&&!1!=a.disableList[c]||b.push(d)});return b=b.join(",")}}});
