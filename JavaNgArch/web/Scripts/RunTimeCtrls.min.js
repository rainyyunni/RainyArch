def.ns="/gn/Corp/";def.tmp=def.MultiViewsState("MultiViewsSample.html");def.tmp.Layout.Controller(["pb","$scope","$rootScope",function(b,e,d){var h=b.Super(this,{},e);d.$on("/gn/Corp/Edit.deleteContact",function(b,a){h.tmp.MsgFromEdit=a})}]);
def.tmp.BranchView("Edit","id").Controller(["pb","serverVm","$scope","$rootScope","$translate",function(b,e,d,h,c){var a=b.Super(this,e,d);a.btnDeleteRow_click=function(b){var d=a.vm.input.contactList[b].name;delete a.vm.input.contactList[b];c("ContactDeleted").then(function(a){h.$emit("/gn/Corp/Edit.deleteContact",a+d)})};a.btnAddRow_click=function(){b.ValidateUtil.Validate(a.frmEdit,"newrow")&&(a.vm.input.contactList[a.vm.input.contactList.length]=a.vm.input.newContact,a.vm.input.newContact={},
b.ValidateUtil.SetPristine(a.frmEdit,"newrow"))}}]).BranchView("AnotherView.htm").Controller(["pb","$scope","$rootScope",function(b,e,d){var h=b.Super(this,{},e);d.$on("/gn/Corp/Edit.deleteContact",function(b,a){h.tmp.MsgFromEdit=a})}]);def.ContentState("TestAjaxNavBackToMultiViewsState.htm").NoController();def.ns="/gn/Dept/";
def.ContentState("Edit","id").Controller(["pb","serverVm","$scope","App_FuncTree",function(b,e,d,h){var c=b.Super(this,e,d);c.ExecuteNoopResult=function(a){b.AjaxNavBack()};c.btnSave_click=function(){var a=h.GetUncheckedListString(c.tmp_treeModel);b.AjaxSubmit("btnSave",null,{"ajax-data":"input.deptFuncIds="+a})}}]);def.ContentState("Add").WithController("Edit");
def.ContentState("List").Controller(["pb","serverVm","$scope","$window","$uibPosition","pbui",function(b,e,d,h,c,a){var f=b.Super(this,e,d);f.vm.editInput={id:0};f.tmp.IsInLine=!1;f.btnDeleteInLine_click=function(d){var c=f.vm.resultList[d];a.Confirm("ConfirmDelete",c.name).then(function(){b.CallAction("/do/gn/Dept/DeleteInLine?id="+c.id,null,function(a){!0==a.data&&delete f.vm.resultList[d]})})};f.btnAddInLine_click=function(){f.moveToLine(-1)};f.btnEditInLine_click=function(a,b){f.moveToLine(b);
f.vm.editInput=a;f.tmp.backupItem=angular.copy(a)};f.btnSaveInLine_click=function(){b.AjaxSubmit("c.frmEdit",null,null,function(a){a.IsData&&(0==f.vm.editInput.id&&(f.vm.editInput.id=a.data,f.vm.resultList[f.vm.resultList.length]=f.vm.editInput),f.resetEditLine())})};f.btnCancel_click=function(){angular.copy(f.tmp.backupItem,f.vm.editInput);f.resetEditLine()};f.resetEditLine=function(){f.vm.editInput={id:0};f.frmEdit.$setPristine();f.moveToLine(null)};f.moveToLine=function(a){var d=b.ElementById("tbl"),
c=b.ElementById("divEdit"),e=b.ElementById("divNewRow");f.tmp.IsInLine=!0;null==a?(f.tmp.IsInLine=!1,b.ElementById("divStandBy").append(c)):-1==a?e.after(c):d.children().eq(a+1).after(c)}}]).WithChild("SrcCode.htm").NoController();def.ns="/gn/User/";
def.ContentState("Edit","id").Controller(["pb","serverVm","$scope","App_FuncTree",function(b,e,d,h){var c=b.Super(this,e,d);c.ExecuteNoopResult=function(a){b.AjaxNavBack()};c.btnSave_click=function(){var a=h.GetUncheckedListString(c.tmp_treeModel);b.AjaxSubmit("btnSave",null,{"ajax-data":"input.userFuncIds="+a})}}]);def.ContentState("Add","deptId").WithController("Edit");
def.ContentState("Search").Controller(["pb","serverVm","$scope",function(b,e,d){b.Super(this,e,d).dept_change=function(){b.AjaxSubmit("frmSearch")}}]).WithChild("List").NavBackRefresh(["pb",function(b){b.AjaxSubmit("frmSearch")}]);
def.ContentState("PassEdit.htm").Controller(["pb","$scope",function(b,e){var d=b.Super(this,{},e);d.btnOK_click=function(){d.frmPass.$invalid||b.AjaxSubmit(null,null,{"ajax-url":"/do/gn/User/SavePassword","ajax-data":"OldPassword="+hex_md5(d.vm.OldPassword)+"&NewPassword="+hex_md5(d.vm.NewPassword)})}}]);def.ns="";def.RootState("/home/Home/MainFrameLoggedIn.htm").NoController();
def.RootState("/home/Home/ShowLogin").Controller(["pb","serverVm","serverResult","$translate",function(b,e,d,h){var c=this;b.ExecuteResult(d,c);c.password_keydown=function(a){return 13==a.which?(c.btnLogin_click(),!1):!0};c.btnLogin_click=function(){c.frmLogin.$invalid||b.CallAction("/do/home/Home/Login","corpCode="+c.vm.corpCode+"&code="+c.vm.code+"&password="+hex_md5(c.vm.password))};c.setLang=function(a){h.use(a)}}]).ForceViewByAction();
app.controller("LeftViewCtrl",["pb","$scope",function(b,e){var d=this;e.$on("$stateChangeSuccess",function(b,c,a,f,k){d.showView="/home/Home/ShowLogin"!=c.name;e.$parent.baseCtrl.showLeftView=d.showView})}]);
app.controller("TopViewCtrl",["pb","$scope","$state",function(b,e,d){var h=this;h.showView=!0;h.navbarCollapsed=!0;h.vm={input:{code:"test",password:"1"}};e.$on("$stateChangeSuccess",function(c,a,f,k,g){h.showView="/home/Home/ShowLogin"!=a.name;!h.showView||void 0!=e.baseCtrl.vm&&void 0!=e.baseCtrl.vm.loginCorpName||b.CallAction("/do/home/Home/MainFrame",null,function(a){e.baseCtrl.vm=a.data.ViewModel;null==a.data.ViewModel?d.go("/home/Home/ShowLogin"):e.baseCtrl.InitMenu(a.data.ViewModel.forbiddenMenuFuncList)})});
h.Html_Load=function(){};h.btnLogin_click=function(){h.frmTopLogin.$invalid||b.CallAction("/do/home/Home/Login","corpCode=1&code="+h.vm.input.code+"&password="+hex_md5(h.vm.input.password))};h.btnLogout_click=function(){e.baseCtrl.vm={};b.CallAction("/do/home/Home/Logout")}}]);def.ns="/ta/Task/";def.ContentState("Edit","id").Controller(["pb","serverVm","$scope",function(b,e,d){b.Super(this,e,d).ExecuteNoopResult=function(d){b.AjaxNavBack()}}]);def.ContentState("Add").WithController("Edit");def.ContentState("Search").WithChild("List").WithChild("SrcCode.htm").NoResolve();
def.ns="/ta/TaskItem/";def.ContentState("Edit","id").Controller(["pb","serverVm","$scope",function(b,e,d){b.Super(this,e,d).ExecuteNoopResult=function(d){b.AjaxNavBack()}}]);def.ContentState("Add").WithController("Edit");def.ContentState("Search").WithChild("List").WithChild("SrcCode.htm").NoResolve();
(function(b,e){e.module("projectbase").directive("ajaxNavbar",["pb","$state","$stateParams",function(b,e,c){return{priority:0,templateUrl:"/Shared/Directive/AjaxNavbar.htm",restrict:"EA",scope:!0,controllerAs:"d",controller:["$scope","$element","$attrs","$transclude",function(a,c,e,g){this.AjaxNavStack=b.AjaxNavData.Stack;this.AjaxNavRefresh=function(){b.AjaxNavRefresh()};this.AjaxNavBack=function(){b.AjaxNavBack()};this.AjaxNavTo=function(a,c){b.AjaxNavTo(a,c)}}]}}])})(String,angular);
(function(b,e){e.module("projectbase").directive("pbFunctree",["pb","$state","$stateParams",function(b,h,c){return{priority:0,templateUrl:"/do/shared/Common/FuncList?action",restrict:"EA",scope:{inputModel:"=inputModel",treeModel:"=treeModel",disabled:"=disabled"},controllerAs:"d",controller:["$scope","$element","$attrs","$transclude",function(a,b,c,d){this.chk_change=function(b){for(var c=0,d=0;d<a.d.levelList.length;d++)if(a.d.levelList[d]==b){c=d;break}for(d=c+1;d<a.d.levelList.length&&!(a.d.levelList[d].length<=
b.length);d++)a.d.selectedList[d]=a.d.selectedList[c]}}],link:function(a,b,c,d){b=function(b,c){var d=b.split(",");e.forEach(d,function(b){e.forEach(a.d.funcList,function(d,e){d==b&&(a.d.selectedList[e]=!1,a.d.disableList[e]=!c)})})};a.d.funcList=a.d._initData.funcList;a.d.levelList=a.d._initData.levelList;a.d.selectedList=[];for(c=0;c<a.d.funcList.length;c++)a.d.selectedList[c]=!0;a.d.disableList=[];a.treeModel={funcList:a.d.funcList,selectedList:a.d.selectedList,disableList:a.d.disableList};c=e.isUndefined(a.inputModel.userFuncIds);
d=e.isUndefined(a.inputModel.deptFuncIds);b(a.inputModel.corpFuncIds,d);a.inputModel.deptFuncIds&&b(a.inputModel.deptFuncIds,c);a.inputModel.userFuncIds&&b(a.inputModel.userFuncIds,!0)}}}])})(String,angular);
(function(b,e){e.module("projectbase").directive("pagerInput",["pb","$timeout",function(b,e){return{priority:0,templateUrl:"/Shared/Directive/Pager.htm",restrict:"A",scope:{m:"=pagerModel"},controllerAs:"d",controller:["$scope","$element","$attrs","$transclude",function(c,a,f,k){var g=this;k=c.m;g.inputName_PageNum=f.pagerInput+".pageNum";g.inputName_PageSize=f.pagerInput+".pageSize";g.submitData=function(){return{"ajax-data":g.inputName_PageNum+"="+c.m.pageNum+"&"+g.inputName_PageSize+"="+c.m.pageSize}};
g.pagerShort=f.pagerShort;g.pagesizeItems=[5,15,100];null!=f.pagerSizemax&&(g.pagesizeItems[3]=f.pagerSizemax);if(null==k.pageNum||1>k.pageNum)k.pageNum=1;k.pageNum>k.pageCount&&(k.pageNum=k.pageCount);0<=k.pageCount&&0>=k.pageNum&&(k.pageNum=1);g.goPageNum=k.pageNum;g.firstpage_click=function(){1!=c.m.pageNum&&(g.goPageNum=c.m.pageNum=1,b.AjaxSubmit(a,null,g.submitData()));return!1};g.prevpage_click=function(){1<c.m.pageNum&&(g.goPageNum=c.m.pageNum-=1,b.AjaxSubmit(a,null,g.submitData()));return!1};
g.nextpage_click=function(){c.m.pageNum<c.m.pageCount&&(g.goPageNum=c.m.pageNum+=1,b.AjaxSubmit(a,null,g.submitData()));return!1};g.lastpage_click=function(){c.m.pageNum!=c.m.pageCount&&(g.goPageNum=c.m.pageNum=c.m.pageCount,b.AjaxSubmit(a,null,g.submitData()));return!1};g.go_click=function(){null!=g.goPageNum&&(c.m.pageNum=g.goPageNum,b.AjaxSubmit(a,null,g.submitData(),function(a){g.goPageNum=a.data.ViewModel.input.pager.pageNum}))};g.pagesize_change=function(){b.AjaxSubmit(a,null,g.submitData(),
function(){e(function(){g.goPageNum=c.m.pageNum})})}}]}}])})(String,angular);
