def.ns="/gn/Corp/";def.tmp=def.MultiViewsState("MultiViewsSample.html");def.tmp.Layout.Controller(["pb","$scope","$rootScope",function(a,e,f){var h=a.Super(this,{},e);f.$on("/gn/Corp/Edit.deleteContact",function(d,b){h.tmp.MsgFromEdit=b})}]);
def.tmp.BranchView("Edit","id").Controller(["pb","serverVm_Edit","$scope","$rootScope","$translate",function(a,e,f,h,d){var b=a.Super(this,e,f);b.btnDeleteRow_click=function(c){var a=b.vm.input.contactList[c].name;delete b.vm.input.contactList[c];d("ContactDeleted").then(function(b){h.$emit("/gn/Corp/Edit.deleteContact",b+a)})};b.btnAddRow_click=function(){a.ValidateUtil.Validate(b.frmEdit,"newrow")&&(b.vm.input.contactList[b.vm.input.contactList.length]=b.vm.input.newContact,b.vm.input.newContact=
{},a.ValidateUtil.SetPristine(b.frmEdit,"newrow"))}}]).BranchView("AnotherView.htm").Controller(["pb","$scope","$rootScope",function(a,e,f){var h=a.Super(this,{},e);f.$on("/gn/Corp/Edit.deleteContact",function(d,b){h.tmp.MsgFromEdit=b})}]);def.ContentState("TestAjaxNavBackToMultiViewsState.htm").NoController();def.ns="/gn/Dept/";
def.ContentState("Edit","id").Controller(["pb","serverVm","$scope","App_FuncTree",function(a,e,f,h){var d=a.Super(this,e,f);d.ExecuteNoopResult=function(b){a.AjaxNavBack()};d.btnSave_click=function(){var b=h.GetUncheckedListString(d.tmp_treeModel);a.AjaxSubmit("btnSave",null,{"ajax-data":"input.deptFuncIds="+b})}}]);def.ContentState("Add").WithController("Edit");
def.ContentState("List").Controller(["pb","serverVm","$scope","$window","$uibPosition","pbui",function(a,e,f,h,d,b){var c=a.Super(this,e,f);c.vm.editInput={id:0};c.tmp.IsInLine=!1;c.btnDeleteInLine_click=function(d){var f=c.vm.resultList[d];b.Confirm("ConfirmDelete",f.name).then(function(){a.CallAction("/do/gn/Dept/DeleteInLine?id="+f.id,null,function(b){!0==b.data&&delete c.vm.resultList[d]})})};c.btnAddInLine_click=function(){c.moveToLine(-1)};c.btnEditInLine_click=function(b,d){c.moveToLine(d);
c.vm.editInput=b;c.tmp.backupItem=angular.copy(b)};c.btnSaveInLine_click=function(){a.AjaxSubmit("c.frmEdit",null,null,function(b){b.IsData&&(0==c.vm.editInput.id&&(c.vm.editInput.id=b.data,c.vm.resultList[c.vm.resultList.length]=c.vm.editInput),c.resetEditLine())})};c.btnCancel_click=function(){angular.copy(c.tmp.backupItem,c.vm.editInput);c.resetEditLine()};c.resetEditLine=function(){c.vm.editInput={id:0};c.frmEdit.$setPristine();c.moveToLine(null)};c.moveToLine=function(b){var d=a.ElementById("tbl"),
g=a.ElementById("divEdit"),f=a.ElementById("divNewRow");c.tmp.IsInLine=!0;null==b?(c.tmp.IsInLine=!1,a.ElementById("divStandBy").append(g)):-1==b?f.after(g):d.children().eq(b+1).after(g)}}]).WithChild("SrcCode.htm").NoController();def.ns="/gn/User/";
def.ContentState("Edit","id").Controller(["pb","serverVm","$scope","App_FuncTree",function(a,e,f,h){var d=a.Super(this,e,f);d.ExecuteNoopResult=function(b){a.AjaxNavBack()};d.btnSave_click=function(){var b=h.GetUncheckedListString(d.tmp_treeModel);a.AjaxSubmit("btnSave",null,{"ajax-data":"input.userFuncIds="+b})}}]);def.ContentState("Add","deptId").WithController("Edit");
def.ContentState("Search").Controller(["pb","serverVm","$scope",function(a,e,f){a.Super(this,e,f).dept_change=function(){a.AjaxSubmit("frmSearch")}}]).WithChild("List").NavBackRefresh(["pb",function(a){a.AjaxSubmit("frmSearch")}]);
def.ContentState("PassEdit.htm").Controller(["pb","$scope",function(a,e){var f=a.Super(this,{},e);f.btnOK_click=function(){f.frmPass.$invalid||a.AjaxSubmit(null,null,{"ajax-url":"/do/gn/User/SavePassword","ajax-data":"OldPassword="+hex_md5(f.vm.OldPassword)+"&NewPassword="+hex_md5(f.vm.NewPassword)})}}]);def.ns="";def.RootState("/home/Home/MainFrameLoggedIn.htm").NoController();
def.RootState("/home/Home/ShowLogin").Controller(["pb","serverVm","serverResult","$translate","$scope",function(a,e,f,h,d){var b=this;a.ExecuteResult(f,b);b.password_keydown=function(d){return 13==d.which?(b.btnLogin_click(),!1):!0};b.btnLogin_click=function(){b.frmLogin.$invalid||a.CallAction("/do/home/Home/Login","corpCode="+b.vm.corpCode+"&code="+b.vm.code+"&password="+hex_md5(b.vm.password))};b.setLang=function(b){d.baseCtrl.SetLang(b);h.use(b)}}]).ForceViewByAction();
app.controller("LeftViewCtrl",["pb","$scope","$transitions",function(a,e,f){var h=this;f.onSuccess({},function(d){h.showView="/home/Home/ShowLogin"!=d.to().name;e.$parent.baseCtrl.showLeftView=h.showView})}]);
app.controller("TopViewCtrl",["pb","$scope","$state","$transitions","App_MenuData","App_FuncTree","$translate",function(a,e,f,h,d,b,c){var l=this;l.showView=!0;l.navbarCollapsed=!0;l.vm={input:{code:"test",password:"1"}};h.onStart({},function(c){l.showView="/home/Home/ShowLogin"!=c.to().name;if(l.showView&&(void 0==e.baseCtrl.vm||void 0==e.baseCtrl.vm.loginCorpName))return a.CallAction("/do/home/Home/MainFrame",null,function(a){e.baseCtrl.vm=a.data.ViewModel;if(null==a.data.ViewModel)return c.router.stateService.target("/home/Home/ShowLogin");
e.baseCtrl.InitMenu(a.data.ViewModel.forbiddenMenuFuncList,d);b.SetForbiddenFuncList(a.data.ViewModel.forbiddenFuncList)})});l.Html_Load=function(){};l.btnLogin_click=function(){l.frmTopLogin.$invalid||a.CallAction("/do/home/Home/Login","corpCode=1&code="+l.vm.input.code+"&password="+hex_md5(l.vm.input.password))};l.btnLogout_click=function(){e.baseCtrl.vm={};a.CallAction("/do/home/Home/Logout")};l.setLang=function(b){e.baseCtrl.SetLang(b);c.use(b)}}]);def.ns="/ta/Task/";
def.ContentState("Edit","id").Controller(["pb","serverVm","$scope",function(a,e,f){a.Super(this,e,f).ExecuteNoopResult=function(f){a.AjaxNavBack()}}]);def.ContentState("Add").WithController("Edit");def.ContentState("Search").WithChild("List").WithChild("SrcCode.htm").NoResolve();def.ns="/ta/TaskItem/";def.ContentState("Edit","id").Controller(["pb","serverVm","$scope",function(a,e,f){a.Super(this,e,f).ExecuteNoopResult=function(f){a.AjaxNavBack()}}]);def.ContentState("Add").WithController("Edit");
def.ContentState("Search").WithChild("List").WithChild("SrcCode.htm").NoResolve();
(function(a,e){app.directive("ajaxNavbar",["pb","APP_ContextPrefix",function(a,e){return{priority:0,templateUrl:e+"/Shared/Directive/AjaxNavbar.htm",restrict:"EA",scope:!0,controllerAs:"d",controller:["$scope","$element","$attrs","$transclude",function(d,b,c,e){this.AjaxNavStack=a.AjaxNavData.Stack;this.AjaxNavRefresh=function(){a.AjaxNavRefresh()};this.AjaxNavBack=function(){a.AjaxNavBack()};this.AjaxNavTo=function(b,d){a.AjaxNavTo(b,d)}}]}}])})(String,angular);
(function(a,e){app.directive("pbFunctree",["pb","APP_ContextPrefix",function(a,h){return{priority:0,templateUrl:h+"/do/shared/Common/FuncList?action",restrict:"EA",scope:{inputModel:"=inputModel",treeModel:"=treeModel",disabled:"=disabled"},controllerAs:"d",controller:["$scope","$element","$attrs","$transclude",function(d,b,a,f){this.chk_change=function(b){for(var a=0,c=0;c<d.d.levelList.length;c++)if(d.d.levelList[c]==b){a=c;break}for(c=a+1;c<d.d.levelList.length&&!(d.d.levelList[c].length<=b.length);c++)d.d.selectedList[c]=
d.d.selectedList[a]}}],link:function(a,b,c,f){b=function(b,c){var f=b.split(",");e.forEach(f,function(b){e.forEach(a.d.funcList,function(f,e){f==b&&(a.d.selectedList[e]=!1,a.d.disableList[e]=!c)})})};a.d.funcList=a.d._initData.funcList;a.d.levelList=a.d._initData.levelList;a.d.selectedList=[];for(c=0;c<a.d.funcList.length;c++)a.d.selectedList[c]=!0;a.d.disableList=[];a.treeModel={funcList:a.d.funcList,selectedList:a.d.selectedList,disableList:a.d.disableList};c=e.isUndefined(a.inputModel.userFuncIds);
f=e.isUndefined(a.inputModel.deptFuncIds);b(a.inputModel.corpFuncIds,f);a.inputModel.deptFuncIds&&b(a.inputModel.deptFuncIds,c);a.inputModel.userFuncIds&&b(a.inputModel.userFuncIds,!0)}}}])})(String,angular);
(function(a,e){app.directive("pagerInput",["pb","$timeout","APP_ContextPrefix",function(a,e,d){return{priority:0,templateUrl:d+"/Shared/Directive/Pager.htm",restrict:"A",scope:{m:"=pagerModel"},controllerAs:"d",controller:["$scope","$element","$attrs","$transclude",function(b,c,d,k){var g=this;k=b.m;null==k&&(k={pageNum:1,pageSize:0,pageCount:0});g.inputName_PageNum=d.pagerInput+".pageNum";g.inputName_PageSize=d.pagerInput+".pageSize";g.submitData=function(){return{"ajax-data":g.inputName_PageNum+
"="+b.m.pageNum+"&"+g.inputName_PageSize+"="+b.m.pageSize}};g.pagerShort=d.pagerShort;g.pagesizeItems=[5,15,100];null!=d.pagerSizemax&&(g.pagesizeItems[3]=d.pagerSizemax);if(null==k.pageNum||1>k.pageNum)k.pageNum=1;k.pageNum>k.pageCount&&(k.pageNum=k.pageCount);0<=k.pageCount&&0>=k.pageNum&&(k.pageNum=1);g.goPageNum=k.pageNum;g.firstpage_click=function(){1!=b.m.pageNum&&(g.goPageNum=b.m.pageNum=1,a.AjaxSubmit(c,null,g.submitData()));return!1};g.prevpage_click=function(){1<b.m.pageNum&&(g.goPageNum=
b.m.pageNum-=1,a.AjaxSubmit(c,null,g.submitData()));return!1};g.nextpage_click=function(){b.m.pageNum<b.m.pageCount&&(g.goPageNum=b.m.pageNum+=1,a.AjaxSubmit(c,null,g.submitData()));return!1};g.lastpage_click=function(){b.m.pageNum!=b.m.pageCount&&(g.goPageNum=b.m.pageNum=b.m.pageCount,a.AjaxSubmit(c,null,g.submitData()));return!1};g.go_click=function(){null!=g.goPageNum&&(b.m.pageNum=g.goPageNum,a.AjaxSubmit(c,null,g.submitData(),function(a){g.goPageNum=a.data.ViewModel.input.pager.pageNum}))};g.pagesize_change=
function(){a.AjaxSubmit(c,null,g.submitData(),function(){e(function(){g.goPageNum=b.m.pageNum})})}}]}}])})(String,angular);
