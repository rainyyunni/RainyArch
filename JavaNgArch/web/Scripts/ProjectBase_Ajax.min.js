var PB_Global_StateDefiner;
(function(I,g){function z(e,d,x,b,c,a,t,l,u,f){var h=function(m){if(g.isString(m)){var b=c.document.getElementById(m);if(b)return g.element(b);b=c.document.getElementsByName(m);return g.element(b)}return g.element(m)},B=function(m){for(;0!=m.length&&"FORM"!=m.prop("tagName")&&"NG-FORM"!=m.prop("tagName");)m=m.parent();return m},r=function(m,b,a,l,t,F){var p,q,g,e,k,y,x,w,r=!0;a&&(a["ajax-data"]&&(x=a["ajax-data"]),a["ajax-form"]&&(p=h(a["ajax-form"])),a["ajax-url"]&&(q=a["ajax-url"]),a["ajax-bind"]&&
(e=a["ajax-bind"]),a["ajax-processing"]&&(g=a["ajax-processing"]),a["ajax-method"]&&(k=a["ajax-method"]),a["ajax-valgroup"]&&(y=a["ajax-valgroup"]));if("undefined"==typeof p&&"undefined"!=typeof m)if("FORM"==h(m).prop("tagName")||"NG-FORM"==h(m).prop("tagName"))p=h(m);else{var v=h(m).attr("ajax-form");if("undefined"!=typeof v){if(""!=v&&(p=h(v),0==p.length)){c.alert("form not found,id="+v);return}}else p=B(h(m))}if("undefined"==typeof q||""==q)q=h(m).attr("ajax-url")||h(p).attr("ajax-url");if("undefined"==
typeof q||""==q)return c.alert("need value for ajax-url!");"undefined"==typeof g&&(g=h(m).attr("ajax-processing")||h(p).attr("id"));"undefined"==typeof k&&(k=h(m).attr("ajax-method")||h(p).attr("ajax-method")||"POST");"undefined"==typeof y&&(y=h(m).attr("ajax-valgroup")||h(p).attr("ajax-valgroup"));"undefined"==typeof e&&(e=h(m).attr("ajax-bind")||h(p).attr("ajax-bind"));"undefined"==typeof e&&a&&!a["ajax-bind"]&&(e="nobind");if("nobind"==e)r=!1;else if("parent"==e){if(w=h(m).parent().controller(),
null==w&&(w=h(p).controller()),null==w){c.alert("ajax-bind=parent targets no controller!");return}}else if("undefined"==typeof e||""==e)if(w=h(m).controller(),null==w&&(w=h(p).controller()),null==w){c.alert("an default ajax-bind targets no controller!");return}if(r&&null==w)if("undefined"==typeof g&&(g=e),"undefined"!=typeof h(e).attr("ui-view")){if(w=h(e).children().eq(0).controller(),null==w){c.alert("bindTargetId:"+e+" targets a ui-view which has not a controller!");return}}else{c.alert("bindTargetId:"+
e+" should target an ui-view !");return}var D;if(0<h(p).length){if(!s(p,y))return;D=G(p)}a=z(D,x);q=C(q);q=q.split("?");q=q[0]+"?"+n.KeyForViewModelOnly+"=true"+(q[1]?"&"+q[1]:"");u.PutProcessing(g);b=d({method:k,url:q,data:a,params:b}).success(function(a,b,c,d){A(a);r&&a.IsVM&&(w.vm=a.data.ViewModel);!0==a.isRcResult?l?!0!=F&&f.ExecuteResult(a):((b=h(m).controller())&&b.ExecuteResult?b.ExecuteResult(h(m).attr("id"),a):f.ExecuteResult(a),a.IsNoop&&b&&b.ExecuteNoopResult&&b.ExecuteNoopResult(h(m).attr("id"))):
!1==a.isRcResult&&f.ExecuteErrorResult(a);u.PutProcessing(!1)}).error(function(a,b,m,c,d){f.ExecuteHttpError(a,b,m,c);u.PutProcessing(!1)});return l?b.then(function(a){return!0==a.data.isRcResult?l(a.data,t):a.data}):b},G=function(a){var b=/\r?\n/g,d=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,h=/^(?:select|textarea)/i,e=a.find("input"),f=a.find("textarea");a=a.find("select");var p=[],q=function(a,m){if(("INPUT"==a.tagName||"SELECT"==
a.tagName||"TEXTAREA"==a.tagName)&&a.name&&"_"!=a.name.substring(0,1)&&!a.disabled&&(a.checked||h.test(a.nodeName)||d.test(a.type))){var e=g.element(a).attr("name"),f=g.element(a).val();g.isArray(f)?g.forEach(f,function(a,m){a=a.replace(b,"\r\n");p[p.length]=c.encodeURIComponent(e)+"="+c.encodeURIComponent(a)}):(f=f.replace(b,"\r\n"),"radio"==a.type&&"on"==f&&(f=""),p[p.length]=c.encodeURIComponent(e)+"="+c.encodeURIComponent(f))}};g.forEach(e,q);g.forEach(f,q);g.forEach(a,q);return p.join("&").replace(/%20/g,
"+").replace(/number%3A/g,"")},s=function(a,b){if("none"==b)return!0;var c=h(a).controller("form");if(c.$invalid){var d=!0,f;for(f in c.$error){for(var l=c.$error[f],p=0;p<l.length;p++)if(l[p].$name.substring(0,1)!=n.UnSubmitNameMarker){var q=l[p].pb_valgroup;if(q)try{if(q=g.fromJson(q),0<=(","+q[b]+",").indexOf(f)){d=!1;break}else d=!0}catch(s){$log.error("pb-valgroup's value is invalid, should be a json string:"+q)}else{d=!1;break}}if(!d)break}if(!d)return e.validateForm(a),!1}return!0},y=function(a){for(var b=
a.length,c=0;c<b;c++)if(null!=a[c]&&!1!=a[c])return!0;return!1},H=function(a,b){a||(a="ConfirmDelete");return g.isString(b)?u.Confirm(a,b):b?u.Confirm("ConfirmDeleteMulti"):u.Alert("NoRowSelected").then(function(){return!1})},z=function(a,b){if("undefined"==typeof a)return"undefined"==typeof b?"":b;if("undefined"==typeof b)return a;if(""==a||""==b)return a+b;for(var c=a.split("&"),d=b.split("&"),f="",h="",e="",l=0;l<d.length;l++){for(var s=d[l].split("="),g=!1,t=0;t<c.length;t++)if(c[t].split("=")[0].toLowerCase()==
s[0].toLowerCase()){c[t]=d[l];g=!0;break}g||""==d[l]||(e=e+d[l]+"&")}for(l=0;l<c.length;l++)h=h+c[l]+"&";h.endWith("&")&&(f=h);e.endWith("&")&&(f+=e);f.endWith("&")&&(f=f.substr(0,f.length-1));return f},E=function(a,b,c){b||c||(b=n.Command_AjaxNavVM,c={ViewModel:null});return{result:a,command:b,data:c}};return{AjaxSubmit:function(a,d,f,l,e,t){var s,g="";null==a&&(a=void 0);if(a&&(a=h(a),1<a.length&&(a=a.eq(0)),1>a.length)){c.alert("param control's indicated no control");return}if("undefined"!=typeof h(a).attr("ajax-confirm")||
"undefined"!=typeof h(a).attr("ajax-confirm-single")||"undefined"!=typeof h(a).attr("ajax-confirm-multi"))s=h(a).attr("ajax-confirm"),"undefined"!=typeof h(a).attr("ajax-confirm-single")?g=h(a).attr("ajax-confirm-single"):"undefined"!=typeof h(a).attr("ajax-confirm-multi")&&(g=b(h(a).attr("ajax-confirm-multi"))(h(a).scope()),g=y(g)),H(s,g).then(function(b){if(!0==b)return r(a,d,f,l,e,t)});else return r(a,d,f,l,e,t)},CallAction:function(a,b,c,l,e){a=C(a);a=a.split("?");a=a[0]+"?"+n.KeyForViewModelOnly+
"=true"+(a[1]?"&"+a[1]:"");b=d({method:"POST",url:a,data:b}).success(function(a,b,c,d){A(a);!0==a.isRcResult&&!0!=e?f.ExecuteResult(a):!1==a.isRcResult&&f.ExecuteErrorResult(a)}).error(function(a,b,c,d){f.ExecuteHttpError(a,b,c,d)});return c?b.then(function(a){if(!0==a.data.isRcResult)return c(a.data,l)}):b},ExecuteResult:f.ExecuteResult,AjaxNavRegister:function(a,b){var c=a.to(),d=a.params(),f=a.from(),l=a.params("from");if(f!=c&&c.name!=v.PrevState&&!(0<k.Stack.length&&c==k.Stack[k.Stack.length-
1].State)){var e,h={};d&&d["ajax-nav"]&&(e=g.lowercase(d["ajax-nav"]));var t=g.lowercase(d["ajax-nav-back"]);if(b){if("forward"==e&&(1==k.Stack.length&&null==k.Stack[0].State&&(k.Stack[0].State=f),c=k.Stack[k.Stack.length-1],f==c.State)){var s=c.State;do s.views?g.forEach(s.views,function(a,b){var c=s.name+".views_"+b;k.ControllerDataMapForCache[c]&&(h[c]=k.ControllerDataMapForCache[c].vm)}):k.ControllerDataMapForCache[s.name]&&(h[s.name]=k.ControllerDataMapForCache[s.name].vm),s=x.get(s.parent);
while(!s.name.startWith("/Shared/"));c.StateData=h}k.ControllerDataMapForCache={}}else t||(e=e||"root",f={PrevState:f,PrevStateParams:l,State:c,StateParams:d,StateData:null},"root"==e?(k.Stack=[v],k.Stack[0].State=c,k.Stack[0].StateParams=d):"forward"==e?k.Stack.push(f):alert("nav has invalid value!"))}},AjaxNavGetBackSrc:function(a,b){var c=b?b["ajax-nav-back"]:void 0,d=c?c.startWith("back:"):!1;if(c&&d){var f=E();f.data.ViewModel=k.Stack[k.Stack.length-1].StateData[a];return{IsBack:d,BackFrom:d?
c.substring(5,c.length):void 0,LastData:f}}return!1},AjaxNavBack:function(){var a=k.Stack.pop(),b;a.PrevStateParams&&(b=g.copy(a.PrevStateParams),b["ajax-nav-back"]="back:"+x.current.name);x.transitionTo(a.PrevState,b,{reload:!1,inherit:!1,notify:!0})},AjaxNavRefresh:function(){x.go(k.Stack[k.Stack.length-1].State,k.Stack[k.Stack.length-1].StateParams,{inherit:!1,reload:!0})},AjaxNavTo:function(a,b){for(;0<k.Stack.length&&a!=k.Stack[k.Stack.length-1].State;)k.Stack.pop();x.go(a,b,{inherit:!1,reload:!0})},
CreateRcResult:E,AjaxNavData:k,ParentForm:B,ElementById:h,Super:function(b,c,d){b.vm=c;b.tmp={};var f=b.__proto__._DefinedBy;if(!f.startWith("/Shared/")){k.ControllerDataMapForCache[f]=b;for(var e in b.__proto__._UsedBy)k.ControllerDataMapForCache[e]=b}var l=b.__proto__._NavBackRefresh;l&&d.$on("$viewContentLoaded",function(b){c._FromResult&&c._FromResult.command==n.Command_AjaxNavVM&&t(function(){a.invoke(l)})});return b},ValidateUtil:{SetPristine:function(a,b){g.forEach(a.PB_Group[b],function(b,
c){a[c].$setPristine()})},Validate:function(a,b){var c=!0;g.forEach(a.PB_Group[b],function(a,b){var d=a.controller("ngModel");d.$invalid&&(c=!1,e.validateElement(d,a,{disabled:!1,forceValidation:!0}))});return c}}}}var v={PrevState:"tobeset",PrevStateParams:null,State:null,StateParams:null,StateData:null},k={ControllerDataMapForCache:{},Stack:[v]},n={DefaultPopupWindowFeature:"height=600, width=600, top=50, left=300, toolbar=yes, menubar=no, scrollbars=yes, resizable=yes,location=no, status=no",AuthFailure:"_AuthFailure",
AuthFailureMaskElementId:"divAuthFailureMask",KeyForViewModelOnly:"_ForViewModelOnly",Command_Noop:"Noop",Command_Message:"Message",Command_Redirect:"Redirect",Command_AppPage:"AppPage",Command_ServerVM:"ServerVM",Command_ServerData:"ServerData",Command_AjaxNavVM:"AjaxNavVM",Command_HttpStatus:"HttpStatus",Command_NewWindow:"NewWindow",UrlContextPrefix:"tobeset",UrlMappingPrefix:"tobeset",AutoControllerMarker:"PB_Auto",UnSubmitNameMarker:"_"},A=function(e){var d=e.command;d==n.Command_ServerVM||e.command==
n.Command_AjaxNavVM?e.IsVM=!0:d==n.Command_Message?e.IsMsg=!0:d==n.Command_ServerData?e.IsData=!0:d==n.Command_Noop?e.IsNoop=!0:d==n.Command_Redirect?e.IsRedirect=!0:d==n.Command_AppPage&&(e.IsAppPage=!0)},C=function(e){return""==n.UrlContextPrefix||e.startWith(n.UrlContextPrefix)?e:n.UrlContextPrefix+e};PB_Global_StateDefiner=function(e){var d=this,k=function(b){return b.endWith(".htm")||b.endWith(".html")||b.endWith(".jsp")||b.endWith(".aspx")||b.endWith(".cshtml")};d.ns="";d.DefaultLayout="";d.tmpStates=
{};d.SetDefaultLayout=function(b){d.DefaultLayout=b};d.SetUrlContextPrefix=function(b){n.UrlContextPrefix=b};d.SetUrlMappingPrefix=function(b){n.UrlMappingPrefix=b};d.SetAjaxNavRootState=function(b){v.PrevState=b};d.CreateWrappedState=function(b,c,a,e,l){var u=l?!0:!1,f,h,r,v;g.isString(b)?(r=(b.startWith("/")?"":d.ns)+b,h=e?r.substring(0,r.indexOf(".")):r,0<h.indexOf("?")&&(h=h.substring(0,h.indexOf("?"))),u?(f={name:e?b.substring(0,b.indexOf(".")):b,controller:n.AutoControllerMarker,controllerAs:"c",
resolve:null},v=l.name+".views_"+f.name):(f={name:h,url:h+(c?"?"+c:""),controller:n.AutoControllerMarker,controllerAs:"c",params:{"ajax-nav":{value:void 0,squash:!0,array:!1},"ajax-nav-back":{value:void 0,squash:!0,array:!1},UrlTranslate:{value:void 0,squash:!0,array:!1}},reloadOnSearch:!1,resolve:null,"abstract":!1,parent:"undefined"==typeof a?d.DefaultLayout:a},v=f.name),e?f.templateUrl=n.UrlContextPrefix+r:(b=["pb","$transition$",function(a,b){var c=a.AjaxNavGetBackSrc(v,b.params());return c&&
c.IsBack?c.LastData:!1}],c=["pb","customizedResultGetter"+(u?"_"+f.name:""),"$transition$",function(a,b,c){if(b)return b;b=n.UrlContextPrefix+n.UrlMappingPrefix+h;if(!b)return null;c=g.copy(c.params());delete c["ajax-nav"];delete c["ajax-nav-back"];delete c.UrlTranslate;return a.AjaxSubmit(null,c,{"ajax-url":b,"ajax-bind":"nobind","ajax-method":"GET"},function(a){return a})}],a=["pb","serverResult"+(u?"_"+f.name:""),function(a,b){A(b);if(b.IsVM)return b.data.ViewModel?b.data.ViewModel._FromResult=
b:console.log("can't append _FromResult, serverResult.data.ViewModel is null"),b.data.ViewModel;if(!1==b.isRcResult)throw b;return{}}],f.templateUrl=function(){return n.UrlContextPrefix+n.UrlMappingPrefix+r},u?(l.resolve||(l.resolve={}),l.resolve["customizedResultGetter_"+f.name]=b,l.resolve["serverResult_"+f.name]=c,l.resolve["serverVm_"+f.name]=a):f.resolve={customizedResultGetter:b,serverResult:c,serverVm:a})):f=b;u||!f||f.data||(f.data={});return{isForView:u,state:f,WithController:function(a){var b;
this.isForView?(b=this.OwnerState.views[a],a=this.OwnerState.name+".views_"+b.name):(a=(a.startWith("/")?"":d.ns)+a,b=d.tmpStates[a],a=b.name);this.state.controller=b.controller;this.state.templateUrl=b.templateUrl;this.state.templateUrlFn=b.templateUrlFn;b=b.controller;if(b=g.isArray(b)?b[b.length-1]:b)b.prototype._UsedBy=b.prototype._UsedBy||{},b.prototype._UsedBy[a]=!0;return this},WithChild:function(a,b){if(this.isForView)throw"WithChild is only for state to use";var c=k(a),c=d.CreateWrappedState(a,
b,this.state.name,c);d.tmpStates[c.state.name]=c.state;this.state["abstract"]=!0;return c},Controller:function(a){this.state.controller=a;if(a=g.isArray(a)?a[a.length-1]:a)a.prototype._DefinedBy=this.isForView?this.OwnerState.name+".views_"+this.state.name:this.state.name;return this},NoController:function(){this.state.controller=null;this.state.controllerAs=null;return this},NoResolve:function(){this.isForView?(delete this.OwnerState.resolve["customizedResultGetter_"+f.name],delete this.OwnerState.resolve["serverResult_"+
f.name],delete this.OwnerState.resolve["serverVm_"+f.name]):this.state.resolve=null;return this},ResultGetter:function(a){this.state.resolve.customizedResultGetter=a;return this},NavBackRefresh:function(a){a?this.state.Tmp_NavBackRefresh=a:this.state.resolve.customizedResultGetter=function(){return!1};return this},ForceViewByAction:function(a){a||(a=this.state.name);this.state.templateUrl=n.UrlContextPrefix+n.UrlMappingPrefix+a+"?"+n.KeyForViewModelOnly+"=false";this.state.templateFn=null;return this},
NoServerResolve:function(){!this.isForView&&this.state.resolve?(this.state.resolve.serverResult=function(){return null},this.state.resolve.serverVm=function(){return null}):this.isForView&&this.OwnerState.resolve["customizedResultGetter_"+f.name]&&(this.OwnerState.resolve["serverResult_"+f.name]=function(){return null},this.OwnerState.resolve["serverVm_"+f.name]=function(){return null});return this},NoServerAction:function(){!this.isForView&&this.state.resolve?(this.state.resolve.serverResult=function(){return null},
this.state.resolve.serverVm=function(){return null}):this.isForView&&this.OwnerState.resolve["customizedResultGetter_"+f.name]&&(this.OwnerState.resolve["serverResult_"+f.name]=function(){return null},this.OwnerState.resolve["serverVm_"+f.name]=function(){return null});return this},BranchView:function(a,b){if(!this.isForView)throw"meant to be called by a wrapped view";var c=k(a),c=d.CreateWrappedState(a,b,void 0,c,this.OwnerState);this.OwnerState.views[c.state.name]=c.state;c.OwnerState=this.OwnerState;
return c}}};d.RootState=function(b,c){var a=k(b),a=d.CreateWrappedState(b,c,"",a);d.tmpStates[a.state.name]=a.state;return a};d.LayoutState=function(b,c,a){var e=k(b);a||(a="");b=d.CreateWrappedState(b,c,a,e);b.state["abstract"]=!0;b.state.controller=null;b.state.resolve=null;d.tmpStates[b.state.name]=b.state;return b};d.ContentState=function(b,c,a){var e=k(b);a||(a=d.DefaultLayout);b=d.CreateWrappedState(b,c,a,e);d.tmpStates[b.state.name]=b.state;return b};d.MultiViewsState=function(b,c,a){var e=
k(b);a||(a=d.DefaultLayout);a=d.CreateWrappedState(b,c,a,e);a.state.name="/MultiViewsLayout_"+a.state.name.substring(1,a.state.name.length);d.tmpStates[a.state.name]=a.state;a.state["abstract"]=!0;b=(b.startWith("/")?"":d.ns)+b;b=e?b.substring(0,b.indexOf(".")):b;0<b.indexOf("?")&&(b=b.substring(0,b.indexOf("?")));c={name:b,url:b+(c?"?"+c:""),params:a.state.params,reloadOnSearch:!1,parent:a.state.name,views:{}};a.state.params=null;a.state.url=a.state.name;d.tmpStates[b]=c;return{state:c,BranchView:function(a,
b){var c=k(a),c=d.CreateWrappedState(a,b,void 0,c,this.state);c.OwnerState=this.state;c.OwnerState.views[c.state.name]=c.state;return c},Layout:a}};d.RawState=function(b){var c=d.CreateWrappedState(b);d.tmpStates[c.state.name]=b;return c};d.RegisterImplicitControllers=function(){g.forEach(d.tmpStates,function(b,c){b.controller==n.AutoControllerMarker&&(b.controller=null!=b.resolve&&b.resolve.serverVm?["pb","serverVm","$scope",function(a,b,c){a.Super(this,b,c)}]:["pb","$scope",function(a,b){a.Super(this,
{},b)}]);if(b.views)g.forEach(b.views,function(a,c){a.controller==n.AutoControllerMarker&&(a.controller=null!=b.resolve&&b.resolve["serverVm_"+c]?["pb","serverVm_"+c,"$scope",function(a,b,c){a.Super(this,b,c)}]:["pb","$scope",function(a,b){a.Super(this,{},b)}]);var d=a.controller;if(d=g.isArray(d)?d[d.length-1]:d)c=b.name+".view_"+c,d.prototype._DefinedBy=d.prototype._DefinedBy||c,d.prototype._NavBackRefresh=b.Tmp_NavBackRefresh,delete b.Tmp_NavBackRefresh});else{var a=b.controller;if(a=g.isArray(a)?
a[a.length-1]:a)a.prototype._DefinedBy=a.prototype._DefinedBy||b.name,a.prototype._NavBackRefresh=b.Tmp_NavBackRefresh,delete b.Tmp_NavBackRefresh}})};d.RegisterStates=function(b){g.forEach(d.tmpStates,function(c,a){b.state(c)});d.tmpStates={}}};z.$inject="validationManager $http $state $parse $window $injector $timeout $q pbui PBPlugIn".split(" ");var r=g.module("projectbase");r.provider("pb",function(){this.$get=z});r.factory("PBPlugIn",["PBPlugIn_Default",function(e){return e}]);r.factory("PBPlugIn_Default",
["$window","$translate","$state","pbui",function(e,d,g,b){return{RefListContainItem:function(b,a){return!1},GetMoreOptionsDefault:function(){return{"\u5168\u90e8":-1}},ExecuteResult:function(b,a){a&&b.IsVM?a.vm=b.data.ViewModel:b.IsMsg?this.ShowResultMessage(b.data):b.IsRedirect?g.go(b.data):b.IsAppPage&&(e.location=n.UrlMappingPrefix+b.data)},ExecuteErrorResult:function(c){c.IsMsg?this.ShowErrorResultMessage(c.data):c.IsRedirect?g.go(c.data):c.IsAppPage?e.location=n.UrlMappingPrefix+c.data:b.ShowCommand(c.command,
c.data)},ExecuteHttpError:function(c,a,d,e){b.Alert(a)},ShowResultMessage:function(b){d(b).then(function(a){e.alert(a)},function(a){e.alert(a)})},ShowErrorResultMessage:function(c){b.Alert(c)}}}]);r.directive("pbInitvm",function(){return{priority:0,restrict:"A",compile:function(e,d,k){return{pre:function(b,c,a){c.controller().vm={};""!=a.pbInitvm&&g.copy(g.fromJson(a.pbInitvm),c.controller().vm)},post:function(b,c,a,d){}}}}});r.directive("pbInitData",function(){return{priority:0,restrict:"A",compile:function(e,
d,k){return{pre:function(b,c,a){""!=a.pbInitData&&a.pbInitVar&&(b[a.pbInitVar]._initData=g.fromJson(a.pbInitData))},post:function(b,c,a,d){}}}}});r.directive("ajaxUrl",["pb","App_FuncTree",function(e,d){return{priority:0,restrict:"A",compile:function(g,b,c){return{pre:function(a,b,c,d){},post:function(a,b,c,g){c.pbFunc||"FORM"==b.prop("tagName")||(a=c.ajaxUrl,""==a&&(a=e.ParentForm(b).attr("ajax-url")),a&&""!=a&&(g=a.lastIndexOf("?"),0<g&&(a=a.substring(0,g)),a=a.split("/"),g=a.length,a=a[g-2]+"."+
a[g-1],d.SetElementStatusByFunc(b,a)));c.ngClick||c.ngSubmit||(c=function(){e.AjaxSubmit(b)},"FORM"==b.prop("tagName")?b.bind("submit",c):"BUTTON"!=b.prop("tagName")&&"A"!=b.prop("tagName")||b.bind("click",c))}}}}}]);r.directive("pbFunc",["App_FuncTree",function(e){return{priority:100,restrict:"A",link:function(d,g,b){e.SetElementStatusByFunc(g,b.pbFunc)}}}]);r.directive("uiSref",["pb","App_FuncTree",function(e,d){return{priority:0,restrict:"A",compile:function(e,b,c){return{pre:function(a,b,c,d){},
post:function(a,b,c,e){c.pbFunc||(a=c.uiSref)&&""!=a&&(c=a.lastIndexOf("("),0<c&&(a=a.substring(0,c)),a=a.split("/"),c=a.length,a=a[c-2]+"."+a[c-1],d.SetElementStatusByFunc(b,a))}}}}}]);r.directive("pbGroup",["pb",function(e){return{priority:0,restrict:"A",require:["^form","ngModel"],link:function(d,e,b,c){b.name&&(d=c[0],d.PB_Group=d.PB_Group||{},d.PB_Group[b.pbGroup]=d.PB_Group[b.pbGroup]||{},d.PB_Group[b.pbGroup][b.name]=e)}}}])})(String,angular);
